{"version":3,"sources":["app.js","auth.js"],"names":["$","document","ready","WorkoutLog","undefined","API_BASE","setAuthHeader","sessionToken","window","localStorage","setItem","ajaxSetup","headers","Authorization","jQuery","on","e","token","getItem","this","hasClass","preventDefault","target","attr","log","setDefinitions","setHistory","which","is","trigger","extend","signup","user","username","val","password","ajax","type","url","data","JSON","stringify","contentType","done","definition","fetchAll","modal","removeClass","text","tab","fail","show","login","console","logout","removeItem"],"mappings":"AACAA,EAAAC,UAAAC,MAAA,WAEA,IAAAC,EAAA,SAAAH,EAAAI,GAgBA,OACAC,SAhBA,sDAiBAC,cAbA,SAAAC,GACAC,OAAAC,aAAAC,QAAA,eAAAH,GAEAP,EAAAW,WACAC,SACAC,cAAAN,OAVA,CAoBAO,QAEAd,EAAA,kCAAAe,GAAA,QAAA,SAAAC,GAEA,IAAAC,EAAAT,OAAAC,aAAAS,QAAA,gBACA,GAAAlB,EAAAmB,MAAAC,SAAA,cAAAH,EAEA,OADAD,EAAAK,kBACA,IAIArB,EAAA,wBAAAe,GAAA,eAAA,SAAAC,GACA,IAAAM,EAAAtB,EAAAgB,EAAAM,QAAAC,KAAA,QACA,SAAAD,GACAnB,EAAAqB,IAAAC,iBAGA,aAAAH,GACAnB,EAAAqB,IAAAE,aAGA,gBAAAJ,GACAnB,EAAAqB,IAAAC,mBAIAzB,EAAAC,UAAAc,GAAA,WAAA,SAAAC,GACA,KAAAA,EAAAW,QACA3B,EAAA,kBAAA4B,GAAA,aACA5B,EAAA,WAAA6B,QAAA,SAEA7B,EAAA,gBAAA4B,GAAA,aACA5B,EAAA,UAAA6B,QAAA,YAKA,IAAAZ,EAAAT,OAAAC,aAAAS,QAAA,gBACAD,GACAd,EAAAG,cAAAW,GAEAT,OAAAL,WAAAA,IChEAH,EAAAC,UAAAC,MAAA,WACAF,EAAA8B,OAAA3B,YACA4B,OAAA,WACA,IAGAC,GACAA,MACAC,SALAjC,EAAA,gBAAAkC,MAMAC,SALAnC,EAAA,gBAAAkC,QASAlC,EAAAoC,MACAC,KAAA,OACAC,IAAAnC,WAAAE,SAAA,OACAkC,KAAAC,KAAAC,UAAAT,GACAU,YAAA,qBAGAC,KAAA,SAAAJ,GACApC,WAAAG,cAAAiC,EAAAhC,cACAJ,WAAAyC,WAAAC,WACA1C,WAAAqB,IAAAqB,WAEA7C,EAAA,iBAAA8C,MAAA,QACA9C,EAAA,aAAA+C,YAAA,YACA/C,EAAA,aAAAgD,KAAA,UACAhD,EAAA,qBAAAiD,IAAA,QACAjD,EAAA,gBAAAkC,IAAA,IACAlC,EAAA,gBAAAkC,IAAA,MAEAgB,KAAA,WACAlD,EAAA,aAAAgD,KAAA,oCAAAG,UAIAC,MAAA,WACA,IAGApB,GACAA,MACAC,SALAjC,EAAA,gBAAAkC,MAMAC,SALAnC,EAAA,gBAAAkC,QASAlC,EAAAoC,MACAC,KAAA,OACAC,IAAAnC,WAAAE,SAAA,QACAkC,KAAAC,KAAAC,UAAAT,GACAU,YAAA,qBAGAC,KAAA,SAAAJ,GACAc,QAAA7B,IAAAe,GACAA,EAAAhC,eACAJ,WAAAG,cAAAiC,EAAAhC,cACAJ,WAAAyC,WAAAC,WACA1C,WAAAqB,IAAAqB,YAGA7C,EAAA,gBAAA8C,MAAA,QACA9C,EAAA,aAAA+C,YAAA,YACA/C,EAAA,aAAAgD,KAAA,UACAhD,EAAA,qBAAAiD,IAAA,QACAjD,EAAA,gBAAAkC,IAAA,IACAlC,EAAA,gBAAAkC,IAAA,MACAgB,KAAA,WACAlD,EAAA,aAAAgD,KAAA,wCAAAG,UAKAG,OAAA,WACA9C,OAAAC,aAAAS,QAAA,kBACAV,OAAAC,aAAA8C,WAAA,gBACAvD,EAAA,aAAAgD,KAAA,aAKAhD,EAAA,WAAAe,GAAA,QAAAZ,WAAA4B,QACA/B,EAAA,UAAAe,GAAA,QAAAZ,WAAAiD,OACApD,EAAA,aAAAe,GAAA,QAAAZ,WAAAmD,QAEA9C,OAAAC,aAAAS,QAAA,iBACAlB,EAAA,aAAAgD,KAAA","file":"../bundle.js","sourcesContent":["// short hand notation for the keyword jQuery\r\n$(document).ready(function(){\r\n\r\n\tvar WorkoutLog = (function($, undefined){\r\n\t\tvar API_BASE = \"https://kcp-fallworkoutlogserver.herokuapp.com/api/\"; \r\n\r\n\t\tvar userDefinitions = []\r\n\r\n\t\tvar setAuthHeader = function(sessionToken){\r\n\t\t\twindow.localStorage.setItem(\"sessionToken\", sessionToken);\r\n\r\n\t\t\t$.ajaxSetup({\r\n\t\t\t\t\"headers\":{\r\n\t\t\t\t\t\"Authorization\": sessionToken\r\n\t\t\t\t}\r\n\t\t\t})\r\n\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tAPI_BASE: API_BASE,\r\n\t\t\tsetAuthHeader: setAuthHeader\r\n\t\t}\r\n\t})(jQuery);\r\n\r\n\t$('.nav-tabs a[data-toggle=\"tab\"]').on(\"click\", function(e){\r\n\t\t//\r\n\t\tvar token = window.localStorage.getItem(\"sessionToken\");\r\n\t\tif($(this).hasClass(\"disabled\") && !token){\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t})\r\n\r\n\t$('a[data-toggle=\"tab\"]').on('shown.bs.tab', function(e){\r\n\t\tvar target = $(e.target).attr(\"href\");\r\n\t\tif(target === \"#log\"){\r\n\t\t\tWorkoutLog.log.setDefinitions();\r\n\t\t}\r\n\r\n\t\tif(target === \"#history\"){\r\n\t\t\tWorkoutLog.log.setHistory();\r\n\t\t}\r\n\r\n\t\tif(target === \"#update-log\"){\r\n\t\t\tWorkoutLog.log.setDefinitions();\r\n\t\t}\r\n\t})\r\n\r\n\t$(document).on('keypress', function(e){\r\n\t\tif(e.which === 13){\r\n\t\t\tif($(\"#signup-module\").is(\":visible\")){\r\n\t\t\t\t$(\"#signup\").trigger(\"click\");\r\n\t\t\t}\r\n\t\t\tif($(\"#login-modal\").is(\":visible\")){\r\n\t\t\t\t$(\"#login\").trigger(\"click\");\r\n\t\t\t}\r\n\t\t} \r\n\t})\r\n\r\n\tvar token = window.localStorage.getItem(\"sessionToken\")\r\n\tif(token){\r\n\t\tWorkoutLog.setAuthHeader(token)\r\n\t}\r\n\twindow.WorkoutLog = WorkoutLog\r\n\r\n\r\n})","$(document).ready(function(){\r\n\t$.extend(WorkoutLog, {\r\n\t\tsignup:function(){\r\n\t\t\tvar username = $(\"#su_username\").val();\r\n\t\t\tvar password = $('#su_password').val(); \r\n\r\n\t\t\tvar user = {\r\n\t\t\t\tuser:{\r\n\t\t\t\t\tusername: username,\r\n\t\t\t\t\tpassword: password\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar signup = $.ajax({\r\n\t\t\t\ttype:\"POST\", \r\n\t\t\t\turl: WorkoutLog.API_BASE + \"user\",\r\n\t\t\t\tdata: JSON.stringify(user),\r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t})\r\n\r\n\t\t\tsignup.done(function(data){\r\n\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken);\r\n\t\t\t\tWorkoutLog.definition.fetchAll();\r\n\t\t\t\tWorkoutLog.log.fetchAll();\r\n\t\t\t\t\r\n\t\t\t\t$(\"#signup-modal\").modal(\"hide\");\r\n\t\t\t\t$(\".disabled\").removeClass(\"disabled\");\r\n\t\t\t\t$(\"#loginout\").text(\"Logout\")\r\n\t\t\t\t$(\"a[href='#define']\").tab(\"show\");\r\n\t\t\t\t$(\"#su_username\").val(\"\");\r\n\t\t\t\t$('#su_password').val(\"\");\r\n\r\n\t\t\t}).fail(function(){\r\n\t\t\t\t$(\"#su_error\").text(\"There was a problem with sign up\").show();\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tlogin : function(){\r\n\t\t\tvar username = $(\"#li_username\").val();\r\n\t\t\tvar password = $(\"#li_password\").val();\r\n\r\n\t\t\tvar user = {\r\n\t\t\t\tuser:{\r\n\t\t\t\t\tusername: username, \r\n\t\t\t\t\tpassword: password\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar login = $.ajax({\r\n\t\t\t\ttype: \"POST\",\r\n\t\t\t\turl: WorkoutLog.API_BASE + \"login\",\r\n\t\t\t\tdata : JSON.stringify(user), \r\n\t\t\t\tcontentType: \"application/json\"\r\n\t\t\t})\r\n\r\n\t\t\tlogin.done(function(data){\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tif(data.sessionToken){\r\n\t\t\t\t\tWorkoutLog.setAuthHeader(data.sessionToken);\r\n\t\t\t\t\tWorkoutLog.definition.fetchAll();\r\n\t\t\t\t\tWorkoutLog.log.fetchAll();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t$(\"#login-modal\").modal(\"hide\");\r\n\t\t\t\t$(\".disabled\").removeClass(\"disabled\");\r\n\t\t\t\t$(\"#loginout\").text(\"Logout\")\r\n\t\t\t\t$(\"a[href='#define']\").tab(\"show\");\r\n\t\t\t\t$(\"#li_username\").val(\"\");\r\n\t\t\t\t$('#li_password').val(\"\");\r\n\t\t\t}).fail(function(){\r\n\t\t\t\t$(\"#li_error\").text(\"There was a problem with sign up man\").show()\r\n\t\t\t})\r\n\r\n\t\t},\r\n\r\n\t\tlogout: function(){\r\n\t\t\tif(window.localStorage.getItem(\"sessionToken\")){\r\n\t\t\t\twindow.localStorage.removeItem(\"sessionToken\");\r\n\t\t\t\t$(\"#loginout\").text(\"Login\");\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t})\r\n\t$(\"#signup\").on(\"click\", WorkoutLog.signup);\r\n\t$(\"#login\").on('click', WorkoutLog.login);\r\n\t$(\"#loginout\").on('click', WorkoutLog.logout);\r\n\r\n\tif(window.localStorage.getItem(\"sessionToken\")){\r\n\t\t$(\"#loginout\").text(\"Logout\");\r\n\t}\r\n});"]}